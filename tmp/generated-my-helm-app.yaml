- apiVersion: argoproj.io/v1alpha1
  kind: Application
  metadata:
    annotations:
      argocd-image-updater.argoproj.io/app.helm.image-name: app.image.repo
      argocd-image-updater.argoproj.io/app.helm.image-tag: app.image.tag
      argocd-image-updater.argoproj.io/app.update-strategy: digest
      argocd-image-updater.argoproj.io/git-branch: main
      argocd-image-updater.argoproj.io/git-repository: git@github.com:kristeey/argo-test-chambers.git
      argocd-image-updater.argoproj.io/image-list: app=tmpplatformjokesacr-cwbddta9eveuc0gu.azurecr.io/platform-jokes-api:dev
      argocd-image-updater.argoproj.io/pull-policy: IfNotPresent
      argocd-image-updater.argoproj.io/write-back-method: git
      argocd-image-updater.argoproj.io/write-back-target: helmvalues:./values.yaml
    finalizers:
    - resources-finalizer.argocd.argoproj.io
    name: my-helm-app-dev
  spec:
    destination:
      namespace: my-helm-app-dev
      server: https://kubernetes.default.svc
    project: my-helm-app
    source:
      chart: kristian-app
      helm:
        valueFiles:
        - https://raw.githubusercontent.com/kristeey/argo-test-chamber/main/apps/my-helm-app/dev/values.yaml
      repoURL: https://kristeey.github.io/kristian-app-chart
      targetRevision: 0.0.4
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
      managedNamespaceMetadata:
        labels:
          app.kubernetes.io/managed-by: argocd-applicationset-controller
          owner: my-helm-app-team
      syncOptions:
      - CreateNamespace=true
      - ServerSideApply=true
- apiVersion: argoproj.io/v1alpha1
  kind: Application
  metadata:
    annotations:
      argocd-image-updater.argoproj.io/app.helm.image-name: app.image.repo
      argocd-image-updater.argoproj.io/app.helm.image-tag: app.image.tag
      argocd-image-updater.argoproj.io/app.update-strategy: digest
      argocd-image-updater.argoproj.io/git-branch: main
      argocd-image-updater.argoproj.io/git-repository: git@github.com:kristeey/argo-test-chambers.git
      argocd-image-updater.argoproj.io/image-list: app=tmpplatformjokesacr-cwbddta9eveuc0gu.azurecr.io/platform-jokes-api:stage
      argocd-image-updater.argoproj.io/pull-policy: IfNotPresent
      argocd-image-updater.argoproj.io/write-back-method: git
      argocd-image-updater.argoproj.io/write-back-target: helmvalues:./values.yaml
    finalizers:
    - resources-finalizer.argocd.argoproj.io
    name: my-helm-app-stage
  spec:
    destination:
      namespace: my-helm-app-stage
      server: https://kubernetes.default.svc
    project: my-helm-app
    source:
      chart: kristian-app
      helm:
        valueFiles:
        - https://raw.githubusercontent.com/kristeey/argo-test-chamber/main/apps/my-helm-app/stage/values.yaml
      repoURL: https://kristeey.github.io/kristian-app-chart
      targetRevision: 0.0.4
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
      managedNamespaceMetadata:
        labels:
          app.kubernetes.io/managed-by: argocd-applicationset-controller
          owner: my-helm-app-team
      syncOptions:
      - CreateNamespace=true
      - ServerSideApply=true
